<!DOCTYPE html>
<html lang="id">
<head>
  
<script>(function(s){s.dataset.zone='10373390',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
  
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STREAMVID</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />

<style>
*{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}
body{margin:0;background:#0f0f0f;font-family:Roboto,Arial,sans-serif;color:#fff}

/* HEADER */
.header{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:#0f0f0f;position:sticky;top:0;z-index:100}
.logo{font-size:20px;font-weight:bold}
.search-icon-trigger{cursor:pointer;padding:8px;border-radius:50%;display:flex;align-items:center;transition:.2s}
.search-icon-trigger:hover{background:#303030}

/* SEARCH */
.search-box{display:none;padding:10px 20px;background:#0f0f0f;animation:slideDown .3s ease}
@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
.search-wrapper{display:flex;align-items:center;max-width:600px;margin:0 auto;background:#121212;border:1px solid #303030;border-radius:40px;padding-left:15px;overflow:hidden}
.search-wrapper:focus-within{border-color:#fff}
.search-wrapper input{flex:1;background:transparent;border:none;color:#fff;padding:10px;font-size:16px;outline:none}
.search-submit-btn{background:#222;border:none;border-left:1px solid #303030;padding:8px 20px;color:#fff;display:flex;align-items:center;cursor:pointer}

.verified{color:#3ea6ff!important;font-size:16px!important;margin-left:4px}

/* FEED */
.main-feed{padding:0}
.section-shorts{margin:24px 0;padding:16px 0;background:#0f0f0f;border-radius:12px}
.section-title{font-size:18px;font-weight:600;margin-bottom:12px;padding:0 16px}
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:20px;margin-bottom:32px}
.shorts-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding:0 16px}

/* CARD */
.card{cursor:pointer;position:relative;overflow:hidden}
.thumbnail{width:100%;aspect-ratio:16/9;background:#111;overflow:hidden;position:relative}
.card.short .thumbnail{aspect-ratio:9/16;border-radius:10px}

/* HOVER EFFECT */
.card .thumbnail{transition:transform .3s ease,box-shadow .3s ease}
.card .thumbnail img{transition:transform .4s ease}
.card:hover .thumbnail{transform:translateY(-4px);box-shadow:0 10px 25px rgba(0,0,0,.6)}
.card:hover .thumbnail img{transform:scale(1.08)}
.card:active .thumbnail{transform:scale(.97)}
.card:active .thumbnail img{transform:scale(1.1)}

.thumbnail img{width:100%;height:100%;object-fit:cover}

/* RIPPLE */
.ripple{position:absolute;border-radius:50%;background:rgba(255,255,255,.3);transform:scale(0);animation:rippleAnim .6s linear;pointer-events:none}
@keyframes rippleAnim{to{transform:scale(4);opacity:0}}

/* REVEAL */
.reveal{opacity:0;transform:translateY(40px);transition:all .6s ease}
.reveal.active{opacity:1;transform:translateY(0)}

/* PREVIEW */
.preview-video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:2}

/* TEXT */
.info{display:flex;margin-top:10px;padding:0 4px}
.avatar{width:32px;height:32px;border-radius:50%;margin-right:10px;object-fit:cover}
.title{font-size:15px;font-weight:500;line-height:1.4;max-height:2.8em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}
.card.short .title{-webkit-line-clamp:3}
.channel{font-size:13px;color:#aaa;margin-top:4px}
.meta{font-size:12.5px;color:#aaa}
</style>
</head>
<body>

<header class="header">
<div class="logo">STREAMVID</div>
<div class="search-icon-trigger" onclick="toggleSearch()">
<span class="material-symbols-outlined">search</span>
</div>
</header>

<div class="search-box" id="searchBox">
<div class="search-wrapper">
<input type="text" id="searchInput" placeholder="Cari video...">
<button class="search-submit-btn">
<span class="material-symbols-outlined">search</span>
</button>
</div>
</div>

<div class="main-feed" id="mainFeed"></div>

<script>
let allVideos=[];
const SHORTS_PER_BLOCK=6;
const LANDSCAPE_PER_BATCH=4;

fetch('videos.json')
.then(res=>res.json())
.then(data=>{
allVideos=data;
renderFeed(allVideos);
observeReveal();
})
.catch(()=>{document.getElementById("mainFeed").innerHTML="<p>Gagal memuat konten.</p>"});

function shuffle(a){return a.sort(()=>Math.random()-0.5)}
function formatViews(n){if(n>=1e6)return(n/1e6).toFixed(1)+"M";if(n>=1e3)return(n/1e3).toFixed(1)+"K";return n}
function timeAgo(d){const now=new Date();const up=new Date(d);const diff=Math.floor((now-up)/1000);if(diff<3600)return"Baru saja";if(diff<86400)return Math.floor(diff/3600)+" jam lalu";return Math.floor(diff/86400)+" hari lalu"}

function renderFeed(videos){
const container=document.getElementById("mainFeed");
container.innerHTML="";
let landscape=shuffle(videos.filter(v=>v.orientation!=="portrait"));
let shorts=shuffle(videos.filter(v=>v.orientation==="portrait"));
let i=0,j=0;

while(i<landscape.length||j<shorts.length){
if(i<landscape.length){
const grid=document.createElement("div");
grid.className="video-grid reveal";
for(let k=0;k<LANDSCAPE_PER_BATCH&&i<landscape.length;k++,i++){
grid.appendChild(createCard(landscape[i],false));
}
container.appendChild(grid);
}
if(j<shorts.length){
const sec=document.createElement("div");
sec.className="section-shorts reveal";
sec.innerHTML=`<div class="section-title">Shorts</div>`;
const grid=document.createElement("div");
grid.className="shorts-grid";
for(let k=0;k<SHORTS_PER_BLOCK&&j<shorts.length;k++,j++){
grid.appendChild(createCard(shorts[j],true));
}
sec.appendChild(grid);
container.appendChild(sec);
}
}
observeReveal();
}

function createCard(video,isShort){
const verifiedIcon=video.verified?'<span class="material-symbols-outlined verified">verified</span>':'';
const card=document.createElement("div");
card.className=`card ${isShort?'short':''}`;
card.innerHTML=`
<div class="thumbnail">
<img src="${video.thumbnail}" loading="lazy">
</div>
<div class="info">
<div>
<div class="title">${video.title}</div>
<div class="channel">${video.channel} ${verifiedIcon}</div>
<div class="meta">${formatViews(video.views)} views â€¢ ${timeAgo(video.uploadDate)}</div>
</div>
</div>`;
card.onclick=()=>location.href="detail.html?id="+video.id;

/* HOLD PREVIEW SYSTEM */
let holdTimer;
card.addEventListener("touchstart",()=>{
holdTimer=setTimeout(()=>startPreview(card,video.video),500);
},{passive:true});
card.addEventListener("touchend",()=>clearTimeout(holdTimer));
card.addEventListener("mouseleave",()=>clearTimeout(holdTimer));

return card;
}

/* PREVIEW */
let currentPreview=null;
function startPreview(card,src){
stopPreview();
const thumb=card.querySelector(".thumbnail");
const video=document.createElement("video");
video.src=src;
video.className="preview-video";
video.muted=true;
video.playsInline=true;
video.autoplay=true;
thumb.appendChild(video);
currentPreview=video;
setTimeout(stopPreview,5000);
}
function stopPreview(){
if(currentPreview){
currentPreview.pause();
currentPreview.remove();
currentPreview=null;
}
}

/* RIPPLE */
document.addEventListener("click",function(e){
const card=e.target.closest(".card");
if(!card)return;
const ripple=document.createElement("span");
ripple.className="ripple";
const rect=card.getBoundingClientRect();
ripple.style.left=(e.clientX-rect.left)+"px";
ripple.style.top=(e.clientY-rect.top)+"px";
card.appendChild(ripple);
setTimeout(()=>ripple.remove(),600);
});

/* REVEAL */
const observer=new IntersectionObserver(entries=>{
entries.forEach(entry=>{
if(entry.isIntersecting)entry.target.classList.add("active");
});
},{threshold:.15});
function observeReveal(){
document.querySelectorAll(".reveal").forEach(el=>observer.observe(el));
}

/* SEARCH */
function toggleSearch(){
const box=document.getElementById("searchBox");
const hidden=box.style.display==="none"||box.style.display==="";
box.style.display=hidden?"block":"none";
if(hidden)document.getElementById("searchInput").focus();
}
let timeout;
document.getElementById("searchInput").addEventListener("input",function(){
clearTimeout(timeout);
timeout=setTimeout(()=>{
const val=this.value.toLowerCase().trim();
if(!val){renderFeed(allVideos);return}
renderFeed(allVideos.filter(v=>v.title.toLowerCase().includes(val)));
},300);
});
</script>
</body>
</html>
